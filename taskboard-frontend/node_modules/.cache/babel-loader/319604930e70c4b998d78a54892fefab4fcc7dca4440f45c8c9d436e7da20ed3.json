{"ast":null,"code":"import _objectSpread from\"/Users/exist/Desktop/work/taskboard-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Box}from\"@mui/joy\";import TaskTable from\"../../components/dashboard/tasks/TaskTable\";import Sidebar from\"../../components/dashboard/sidebar/Sidebar\";import DashboardHeader from\"./DashboardHeader\";import TaskFilters from\"../../components/dashboard/tasks/TaskFilters\";import{useTasks}from\"../../hooks/useTasks\";import{useState,useEffect}from\"react\";import EditTaskModal from\"../../components/dashboard/tasks/EditTaskModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DashboardContent(){const[filters,setFilters]=useState({});const{rows,loading,deleteTask,refresh,updateTask}=useTasks();useEffect(()=>{refresh(filters);},[filters,refresh]);const[editingTask,setEditingTask]=useState(null);const tableRows=rows.map(task=>({id:task.id,title:task.title,description:task.description,status:task.status.charAt(0).toUpperCase()+task.status.slice(1).toLowerCase(),dueDate:task.dueDate,date:task.dueDate,until:task.dueDate}));const handleDelete=async id=>{await deleteTask(id);refresh();};const handleEdit=id=>{const task=tableRows.find(r=>r.id===id);if(task)setEditingTask(task);};const handleUpdate=async updatedTask=>{await updateTask(_objectSpread(_objectSpread({},updatedTask),{},{id:String(updatedTask.id)}));setEditingTask(null);refresh();};const handleCloseEdit=()=>{setEditingTask(null);};return/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",minHeight:\"100dvh\"},children:[/*#__PURE__*/_jsx(Sidebar,{onTaskCreated:refresh}),/*#__PURE__*/_jsxs(Box,{component:\"main\",className:\"MainContent\",sx:{px:{xs:2,md:6},pt:{xs:\"calc(12px + var(--Header-height))\",sm:\"calc(12px + var(--Header-height))\",md:3},pb:{xs:2,sm:2,md:3},flex:1,display:\"flex\",flexDirection:\"column\",minWidth:0,height:\"100dvh\",gap:1,overflow:\"auto\"},children:[/*#__PURE__*/_jsx(DashboardHeader,{}),/*#__PURE__*/_jsx(TaskFilters,{filters:filters,onFilterChange:setFilters}),/*#__PURE__*/_jsx(TaskTable,{rows:tableRows,loading:loading,onDelete:handleDelete,onEdit:handleEdit}),editingTask&&/*#__PURE__*/_jsx(EditTaskModal,{task:{id:editingTask.id,title:editingTask.title,description:editingTask.description,dueDate:editingTask.dueDate,status:editingTask.status},onClose:handleCloseEdit,onSave:handleUpdate})]})]});}","map":{"version":3,"names":["Box","TaskTable","Sidebar","DashboardHeader","TaskFilters","useTasks","useState","useEffect","EditTaskModal","jsx","_jsx","jsxs","_jsxs","DashboardContent","filters","setFilters","rows","loading","deleteTask","refresh","updateTask","editingTask","setEditingTask","tableRows","map","task","id","title","description","status","charAt","toUpperCase","slice","toLowerCase","dueDate","date","until","handleDelete","handleEdit","find","r","handleUpdate","updatedTask","_objectSpread","String","handleCloseEdit","sx","display","minHeight","children","onTaskCreated","component","className","px","xs","md","pt","sm","pb","flex","flexDirection","minWidth","height","gap","overflow","onFilterChange","onDelete","onEdit","onClose","onSave"],"sources":["/Users/exist/Desktop/work/taskboard-frontend/src/pages/dashboard/DashboardContent.tsx"],"sourcesContent":["import { Box } from \"@mui/joy\";\nimport TaskTable, { RowType } from \"../../components/dashboard/tasks/TaskTable\";\nimport Sidebar from \"../../components/dashboard/sidebar/Sidebar\";\nimport DashboardHeader from \"./DashboardHeader\";\nimport TaskFilters, { Filters } from \"../../components/dashboard/tasks/TaskFilters\";\nimport { useTasks } from \"../../hooks/useTasks\";\nimport { useState, useEffect } from \"react\";\nimport EditTaskModal from \"../../components/dashboard/tasks/EditTaskModal\";\n\nexport type Task = {\n  id: string;\n  title: string;\n  description: string;\n  dueDate: string;\n  status: string;\n};\n\nexport default function DashboardContent() {\n  const [filters, setFilters] = useState<Filters>({});\n\n  const { rows, loading, deleteTask, refresh, updateTask } = useTasks();\n\n  useEffect(() => {\n    refresh(filters);\n  }, [filters, refresh]);\n\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n\n  const tableRows: RowType[] = rows.map((task) => ({\n    id: task.id,\n    title: task.title,\n    description: task.description,\n    status:\n      task.status.charAt(0).toUpperCase() + task.status.slice(1).toLowerCase(),\n    dueDate: task.dueDate,\n    date: task.dueDate,\n    until: task.dueDate,\n  }));\n\n  const handleDelete = async (id: string) => {\n    await deleteTask(id);\n    refresh();\n  };\n\n  const handleEdit = (id: string) => {\n    const task = tableRows.find((r) => r.id === id);\n    if (task) setEditingTask(task);\n  };\n\n  const handleUpdate = async (updatedTask: Task) => {\n    await updateTask({\n      ...updatedTask,\n      id: String(updatedTask.id),\n    });\n    setEditingTask(null);\n    refresh();\n  };\n\n  const handleCloseEdit = () => {\n    setEditingTask(null);\n  };\n\n  return (\n    <Box sx={{ display: \"flex\", minHeight: \"100dvh\" }}>\n      <Sidebar onTaskCreated={refresh} />\n      <Box\n        component=\"main\"\n        className=\"MainContent\"\n        sx={{\n          px: { xs: 2, md: 6 },\n          pt: {\n            xs: \"calc(12px + var(--Header-height))\",\n            sm: \"calc(12px + var(--Header-height))\",\n            md: 3,\n          },\n          pb: { xs: 2, sm: 2, md: 3 },\n          flex: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          minWidth: 0,\n          height: \"100dvh\",\n          gap: 1,\n          overflow: \"auto\",\n        }}\n      >\n        <DashboardHeader />\n        <TaskFilters filters={filters} onFilterChange={setFilters} />\n        <TaskTable\n          rows={tableRows}\n          loading={loading}\n          onDelete={handleDelete}\n          onEdit={handleEdit}\n        />\n        {editingTask && (\n          <EditTaskModal\n            task={{\n              id: editingTask.id,\n              title: editingTask.title,\n              description: editingTask.description,\n              dueDate: editingTask.dueDate,\n              status: editingTask.status,\n            }}\n            onClose={handleCloseEdit}\n            onSave={handleUpdate}\n          />\n        )}\n      </Box>\n    </Box>\n  );\n}\n"],"mappings":"iIAAA,OAASA,GAAG,KAAQ,UAAU,CAC9B,MAAO,CAAAC,SAAS,KAAmB,4CAA4C,CAC/E,MAAO,CAAAC,OAAO,KAAM,4CAA4C,CAChE,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,WAAW,KAAmB,8CAA8C,CACnF,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,aAAa,KAAM,gDAAgD,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAU3E,cAAe,SAAS,CAAAC,gBAAgBA,CAAA,CAAG,CACzC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAU,CAAC,CAAC,CAAC,CAEnD,KAAM,CAAEU,IAAI,CAAEC,OAAO,CAAEC,UAAU,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAErEE,SAAS,CAAC,IAAM,CACdY,OAAO,CAACL,OAAO,CAAC,CAClB,CAAC,CAAE,CAACA,OAAO,CAAEK,OAAO,CAAC,CAAC,CAEtB,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAc,IAAI,CAAC,CAEjE,KAAM,CAAAiB,SAAoB,CAAGP,IAAI,CAACQ,GAAG,CAAEC,IAAI,GAAM,CAC/CC,EAAE,CAAED,IAAI,CAACC,EAAE,CACXC,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,WAAW,CAAEH,IAAI,CAACG,WAAW,CAC7BC,MAAM,CACJJ,IAAI,CAACI,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGN,IAAI,CAACI,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC1EC,OAAO,CAAET,IAAI,CAACS,OAAO,CACrBC,IAAI,CAAEV,IAAI,CAACS,OAAO,CAClBE,KAAK,CAAEX,IAAI,CAACS,OACd,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAX,EAAU,EAAK,CACzC,KAAM,CAAAR,UAAU,CAACQ,EAAE,CAAC,CACpBP,OAAO,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAAmB,UAAU,CAAIZ,EAAU,EAAK,CACjC,KAAM,CAAAD,IAAI,CAAGF,SAAS,CAACgB,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACd,EAAE,GAAKA,EAAE,CAAC,CAC/C,GAAID,IAAI,CAAEH,cAAc,CAACG,IAAI,CAAC,CAChC,CAAC,CAED,KAAM,CAAAgB,YAAY,CAAG,KAAO,CAAAC,WAAiB,EAAK,CAChD,KAAM,CAAAtB,UAAU,CAAAuB,aAAA,CAAAA,aAAA,IACXD,WAAW,MACdhB,EAAE,CAAEkB,MAAM,CAACF,WAAW,CAAChB,EAAE,CAAC,EAC3B,CAAC,CACFJ,cAAc,CAAC,IAAI,CAAC,CACpBH,OAAO,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAA0B,eAAe,CAAGA,CAAA,GAAM,CAC5BvB,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,mBACEV,KAAA,CAACZ,GAAG,EAAC8C,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,eAChDvC,IAAA,CAACR,OAAO,EAACgD,aAAa,CAAE/B,OAAQ,CAAE,CAAC,cACnCP,KAAA,CAACZ,GAAG,EACFmD,SAAS,CAAC,MAAM,CAChBC,SAAS,CAAC,aAAa,CACvBN,EAAE,CAAE,CACFO,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAC,CAAEC,EAAE,CAAE,CAAE,CAAC,CACpBC,EAAE,CAAE,CACFF,EAAE,CAAE,mCAAmC,CACvCG,EAAE,CAAE,mCAAmC,CACvCF,EAAE,CAAE,CACN,CAAC,CACDG,EAAE,CAAE,CAAEJ,EAAE,CAAE,CAAC,CAAEG,EAAE,CAAE,CAAC,CAAEF,EAAE,CAAE,CAAE,CAAC,CAC3BI,IAAI,CAAE,CAAC,CACPZ,OAAO,CAAE,MAAM,CACfa,aAAa,CAAE,QAAQ,CACvBC,QAAQ,CAAE,CAAC,CACXC,MAAM,CAAE,QAAQ,CAChBC,GAAG,CAAE,CAAC,CACNC,QAAQ,CAAE,MACZ,CAAE,CAAAf,QAAA,eAEFvC,IAAA,CAACP,eAAe,GAAE,CAAC,cACnBO,IAAA,CAACN,WAAW,EAACU,OAAO,CAAEA,OAAQ,CAACmD,cAAc,CAAElD,UAAW,CAAE,CAAC,cAC7DL,IAAA,CAACT,SAAS,EACRe,IAAI,CAAEO,SAAU,CAChBN,OAAO,CAAEA,OAAQ,CACjBiD,QAAQ,CAAE7B,YAAa,CACvB8B,MAAM,CAAE7B,UAAW,CACpB,CAAC,CACDjB,WAAW,eACVX,IAAA,CAACF,aAAa,EACZiB,IAAI,CAAE,CACJC,EAAE,CAAEL,WAAW,CAACK,EAAE,CAClBC,KAAK,CAAEN,WAAW,CAACM,KAAK,CACxBC,WAAW,CAAEP,WAAW,CAACO,WAAW,CACpCM,OAAO,CAAEb,WAAW,CAACa,OAAO,CAC5BL,MAAM,CAAER,WAAW,CAACQ,MACtB,CAAE,CACFuC,OAAO,CAAEvB,eAAgB,CACzBwB,MAAM,CAAE5B,YAAa,CACtB,CACF,EACE,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}