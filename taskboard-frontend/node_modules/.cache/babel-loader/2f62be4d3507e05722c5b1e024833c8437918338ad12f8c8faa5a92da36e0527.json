{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getMeApi,loginApi,registerApi}from\"../api/auth\";import{saveToken,clearToken,getStoredToken}from\"../utils/token\";export function useAuthProvider(){const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);const[isAuthenticated,setIsAuthenticated]=useState(false);useEffect(()=>{const token=getStoredToken();if(!token){setIsLoading(false);return;}saveToken(token);getMeApi().then(user=>{setUser(user);setIsAuthenticated(true);}).catch(()=>{setUser(null);setIsAuthenticated(false);}).finally(()=>setIsLoading(false));},[]);async function login(email,password){const token=await loginApi(email,password);saveToken(token);const user=await getMeApi();setUser(user);setIsAuthenticated(true);}async function register(email,password){const token=await registerApi(email,password);saveToken(token);const user=await getMeApi();setUser(user);setIsAuthenticated(true);}function logout(){clearToken();setUser(null);setIsAuthenticated(false);}return{user,isAuthenticated,isLoading,login,register,logout};}","map":{"version":3,"names":["useState","useEffect","getMeApi","loginApi","registerApi","saveToken","clearToken","getStoredToken","useAuthProvider","user","setUser","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","token","then","catch","finally","login","email","password","register","logout"],"sources":["/Users/exist/Desktop/work/taskboard-frontend/src/hooks/useAuthProvider.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getMeApi, loginApi, registerApi } from \"../api/auth\";\nimport { saveToken, clearToken, getStoredToken } from \"../utils/token\";\nimport { User } from \"../context/AuthContext\";\n\nexport function useAuthProvider() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const token = getStoredToken();\n    if (!token) {\n      setIsLoading(false);\n      return;\n    }\n\n    saveToken(token);\n\n    getMeApi()\n      .then((user) => {\n        setUser(user);\n        setIsAuthenticated(true);\n      })\n      .catch(() => {\n        setUser(null);\n        setIsAuthenticated(false);\n      })\n      .finally(() => setIsLoading(false));\n  }, []);\n\n  async function login(email: string, password: string) {\n    const token = await loginApi(email, password);\n    saveToken(token);\n    const user = await getMeApi();\n    setUser(user);\n    setIsAuthenticated(true);\n  }\n\n  async function register(email: string, password: string) {\n    const token = await registerApi(email, password);\n    saveToken(token);\n    const user = await getMeApi();\n    setUser(user);\n    setIsAuthenticated(true);\n  }\n\n  function logout() {\n    clearToken();\n    setUser(null);\n    setIsAuthenticated(false);\n  }\n\n  return { user, isAuthenticated, isLoading, login, register, logout };\n}\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,QAAQ,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,aAAa,CAC7D,OAASC,SAAS,CAAEC,UAAU,CAAEC,cAAc,KAAQ,gBAAgB,CAGtE,MAAO,SAAS,CAAAC,eAAeA,CAAA,CAAG,CAChC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACa,eAAe,CAAEC,kBAAkB,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAE7DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,KAAK,CAAGR,cAAc,CAAC,CAAC,CAC9B,GAAI,CAACQ,KAAK,CAAE,CACVH,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEAP,SAAS,CAACU,KAAK,CAAC,CAEhBb,QAAQ,CAAC,CAAC,CACPc,IAAI,CAAEP,IAAI,EAAK,CACdC,OAAO,CAACD,IAAI,CAAC,CACbK,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAAC,CACDG,KAAK,CAAC,IAAM,CACXP,OAAO,CAAC,IAAI,CAAC,CACbI,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,CAAC,CACDI,OAAO,CAAC,IAAMN,YAAY,CAAC,KAAK,CAAC,CAAC,CACvC,CAAC,CAAE,EAAE,CAAC,CAEN,cAAe,CAAAO,KAAKA,CAACC,KAAa,CAAEC,QAAgB,CAAE,CACpD,KAAM,CAAAN,KAAK,CAAG,KAAM,CAAAZ,QAAQ,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAC7ChB,SAAS,CAACU,KAAK,CAAC,CAChB,KAAM,CAAAN,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAAC,CAAC,CAC7BQ,OAAO,CAACD,IAAI,CAAC,CACbK,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAEA,cAAe,CAAAQ,QAAQA,CAACF,KAAa,CAAEC,QAAgB,CAAE,CACvD,KAAM,CAAAN,KAAK,CAAG,KAAM,CAAAX,WAAW,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAChDhB,SAAS,CAACU,KAAK,CAAC,CAChB,KAAM,CAAAN,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAAC,CAAC,CAC7BQ,OAAO,CAACD,IAAI,CAAC,CACbK,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAEA,QAAS,CAAAS,MAAMA,CAAA,CAAG,CAChBjB,UAAU,CAAC,CAAC,CACZI,OAAO,CAAC,IAAI,CAAC,CACbI,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAEA,MAAO,CAAEL,IAAI,CAAEI,eAAe,CAAEF,SAAS,CAAEQ,KAAK,CAAEG,QAAQ,CAAEC,MAAO,CAAC,CACtE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}